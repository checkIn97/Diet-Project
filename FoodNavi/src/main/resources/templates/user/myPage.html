<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<th:block th:insert="~{/includes/headerMain}"></th:block>
<meta charset="UTF-8">
<script th:inline="javascript">
    function delete_user() {
        /*<![CDATA[*/
        window.location.href="user_delete";
        /*]]>*/
    }

    function goMyHistory() {
        window.location.href="foodHistory_view";
    }

    function goConfirmHistory() {
        window.location.href="foodTodayHistory_view";
    }
</script>
<h1>
    <a href="/mainpage"><img alt="foodNaviFont" class="foodNaviFont" src="/assets/images/foodNaviFont.png"></a>
</h1>

<!-- myPage -->
<article id="box">
    <h2 class="major">마이페이지</h2>
    <form method="post" action="user_update">
        <div class="fields">


            <!--회원 id는 표시만 되고 수정은 안된다.-->
            <div class="field half">
                <label for="userId">아이디</label>
                <input type="text" name="userid" id="userId" th:value="${user.userid}" readonly/>
            </div>
            <div class="field half">
                <label for="userName">이름</label>
                <input type="text" name="name" id="userName" th:value="${user.name}" readonly/>
            </div>
            <div class="field half">
                <label for="userPassword">비밀번호</label>
                <input type="password" name="userpw" id="userPassword"/>
            </div>


            <div class="field half">
                <label for="userAge">나이</label>
                <input type="text" name="age" id="userAge" th:value="${user.age}"/>
            </div>
            <div class="field half">
                <label for="userHeight">키</label>
                <input type="text" name="height" id="userHeight" th:value="${user.height}"/>
            </div>
            <div class="field half">
                <label for="userWeight">몸무게</label>
                <input type="text" name="weight" id="userWeight" th:value="${user.weight}"/>
            </div>
            <div class="field">
                <label for="userWeight">BMI 지수</label>
                <input type="text" name="bmi" id="bmi" th:value="${userVo.BMI}" readonly/>
            </div>
            <div class="field">
                <label for="likeList">내가 추천한 식단</label>
                <table name="likeList" id="likeList">
                    <tr>
                        <th>음식명</th>
                        <th>칼로리</th>
                        <th>탄수화물</th>
                        <th>단백질</th>
                        <th>지방</th>
                        <th>추천점수</th>
                    </tr>
                    <tr th:if="${foodVoList.size() == 0}">
                        <td colspan="5" th:text="'추천한 음식이 없습니다. 음식을 등록해주세요.'"></td>
                    </tr>
                    <tr th:each="foodVo : ${foodVoList}" th:unless="${foodVoList.size() == 0}">
                        <td><a th:href="@{food_detail(fseq=${foodVo.food.fseq}, type='m')}">[[${foodVo.food.name}]]</a></td>
                        <!--<td>[[${foodVo.food.name}]]</td>-->
                        <td>[[${foodVo.kcal}]]kcal</td>
                        <td>[[${foodVo.carb}]]g</td>
                        <td>[[${foodVo.prt}]]g</td>
                        <td>[[${foodVo.fat}]]g</td>
                        <td>
			            	<span class="satisfaction" th:alt="${foodVo.scoreView+'%'}" th:title="${foodVo.scoreView+'%'}">
						    	<img class="star" src="/assets/images/star-empty.png" th:if="${foodVo.starScore == 0}">
						    	<img class="star" src="/assets/images/star-half.png" th:if="${foodVo.starScore == 1}">
						    	<img class="star" src="/assets/images/star-full.png" th:if="${foodVo.starScore >= 2}">
						    	<img class="star" src="/assets/images/star-empty.png" th:if="${foodVo.starScore <= 2}">
						    	<img class="star" src="/assets/images/star-half.png" th:if="${foodVo.starScore == 3}">
						    	<img class="star" src="/assets/images/star-full.png" th:if="${foodVo.starScore >= 4}">
						    	<img class="star" src="/assets/images/star-empty.png" th:if="${foodVo.starScore <= 4}">
						    	<img class="star" src="/assets/images/star-half.png" th:if="${foodVo.starScore == 5}">
						    	<img class="star" src="/assets/images/star-full.png" th:if="${foodVo.starScore >= 6}">
						    	<img class="star" src="/assets/images/star-empty.png" th:if="${foodVo.starScore <= 6}">
						    	<img class="star" src="/assets/images/star-half.png" th:if="${foodVo.starScore == 7}">
						    	<img class="star" src="/assets/images/star-full.png" th:if="${foodVo.starScore >= 8}">
						    	<img class="star" src="/assets/images/star-empty.png" th:if="${foodVo.starScore <= 8}">
						    	<img class="star" src="/assets/images/star-half.png" th:if="${foodVo.starScore == 9}">
						    	<img class="star" src="/assets/images/star-full.png" th:if="${foodVo.starScore >= 10}">
		    				</span>
		                </td>
                    </tr>
                </table>
            </div>

            <div class="field">
                <input type="submit" value="정보 수정" class="primary"/>
                <input type="button" value="회원탈퇴" class="button" onclick="delete_user()" />
                <input type="button" value="나의 식단 기록" id="my_history" onclick="goMyHistory()" />
                <input type="button" value="식단 바구니" id="confirm_history" onclick="goConfirmHistory()" />
            </div>
        </div>
    </form>
</article>


<div class="fixed-bottom">
    <th:block th:insert="~{includes/toggleChat}"></th:block>
</div>

<th:block th:insert="~{includes/footer}"></th:block>
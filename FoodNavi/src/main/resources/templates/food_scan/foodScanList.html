<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<th:block th:insert="~{/includes/headerMain}"></th:block>
<head>
<meta charset="UTF-8">
<title>Food Navigator</title>
<script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
</head>
<body>
	<h2><a href="food_scan">Food Search</a></h2>
	
	<!-- 검색 또는 추천 조건값을 설정하는 영역 -->
	<form name="scanForm" id="scanForm" method="post">
		<input type="hidden" name="page" value=0>
		<table>
			<tr>
				<td>검색단어</td>
				<td>
					<select name="searchField">
						<th:block th:each="field : ${foodScanVo.searchType}">
							<th:block th:if="${field[0] == foodScanVo.searchField}">
								<option th:value="${field[0]}" selected>[[${field[1]}]]</option>
							</th:block>
							<th:block th:unless="${field[0] == foodScanVo.searchField}">
								<option th:value="${field[0]}">[[${field[1]}]]</option>
							</th:block>						
						</th:block>
					</select>
				</td>
				<td>
					<input type="text" name="searchWord" th:value="${foodScanVo.searchWord}"/>
				</td>
				<td>제외단어</td>
				<td>
					<select name="banField">
						<th:block th:each="field : ${foodScanVo.searchType}">
							<th:block th:if="${field[0] == foodScanVo.banField}">
								<option th:value="${field[0]}" selected>[[${field[1]}]]</option>
							</th:block>
							<th:block th:unless="${field[0] == foodScanVo.banField}">
								<option th:value="${field[0]}">[[${field[1]}]]</option>
							</th:block>						
						</th:block>
					</select>
				</td>
				<td>
					<input type="text" name="banWord" th:value="${foodScanVo.banWord}"/>
				</td>
				<td>
					<input type="button" value="검색" onclick="food_scan()"/>
				</td>
			</tr>
			<tr>
				<td>
					<select name="taste">
						<th:block th:each="field : ${foodScanVo.tasteArray}">
							<th:block th:if="${field[0] == foodScanVo.taste[0]}">
								<option th:value="${field[0]}" selected>[[${field[1]}]]</option>
							</th:block>
							<th:block th:unless="${field[0] == foodScanVo.taste[0]}">
								<option th:value="${field[0]}">[[${field[1]}]]</option>
							</th:block>						
						</th:block>
					</select>
				</td>
				<td>
					<select name="purpose">
						<th:block th:each="field : ${foodScanVo.purposeCategory}">
							<th:block th:if="${field[0] == foodScanVo.purpose}">
								<option th:value="${field[0]}" selected>[[${field[1]}]]</option>
							</th:block>
							<th:block th:unless="${field[0] == foodScanVo.purpose}">
								<option th:value="${field[0]}">[[${field[1]}]]</option>
							</th:block>						
						</th:block>
					</select>
				</td>
				<td>
					<select name="vegetarian">
						<th:block th:each="field : ${foodScanVo.vegetarianCategory}">
							<th:block th:if="${field[0] == foodScanVo.vegetarian}">
								<option th:value="${field[0]}" selected>[[${field[1]}]]</option>
							</th:block>
							<th:block th:unless="${field[0] == foodScanVo.vegetarian}">
								<option th:value="${field[0]}">[[${field[1]}]]</option>
							</th:block>						
						</th:block>
					</select>
				</td>
				<td>
					<select name="foodCountry">
						<th:block th:each="field : ${foodScanVo.foodCountryCategory}">
							<th:block th:if="${field[0] == foodScanVo.foodCountry}">
								<option th:value="${field[0]}" selected>[[${field[1]}]]</option>
							</th:block>
							<th:block th:unless="${field[0] == foodScanVo.foodCountry}">
								<option th:value="${field[0]}">[[${field[1]}]]</option>
							</th:block>						
						</th:block>
					</select>
				</td>
				<td>
					<select name="dietType">
						<th:block th:each="field : ${foodScanVo.dietTypeCategory}">
							<th:block th:if="${field[0] == foodScanVo.dietType}">
								<option th:value="${field[0]}" selected>[[${field[1]}]]</option>
							</th:block>
							<th:block th:unless="${field[0] == foodScanVo.dietType}">
								<option th:value="${field[0]}">[[${field[1]}]]</option>
							</th:block>						
						</th:block>
					</select>
				</td>
				<td>
					<select name="mealTime">
						<th:block th:each="field : ${foodScanVo.mealTimeCategory}">
							<th:block th:if="${field[0] == foodScanVo.mealTime}">
								<option th:value="${field[0]}" selected>[[${field[1]}]]</option>
							</th:block>
							<th:block th:unless="${field[0] == foodScanVo.mealTime}">
								<option th:value="${field[0]}">[[${field[1]}]]</option>
							</th:block>						
						</th:block>
					</select>
				</td>
				<td>
					<input type="button" value="추천검색" onclick="food_recommend()"/>
				</td>
			</tr>
		</table>
		<br>
	</form>
	<!-- 리스트가 입력되는 영역 -->
	<th:block id="list_insert" th:insert="~{/food_scan/include/food_list_area}"></th:block>
	
	<!-- 리스트에 맞게 페이지가 입력되는 영역 -->
	<!-- 리스트의 사이즈가 0인 경우에는 표시되지 않음 -->
    <th:block id="page_insert" th:if="${pageInfo.totalPages != 0}" th:insert="~{/food_scan/include/food_page_area}"></th:block>
</body>
<script>
function food_scan() {
	$("#scanForm").attr("action", "food_scan").submit();
}

function food_recommend() {
	$("#scanForm").attr("action", "food_recommend1").submit();
}

</script>
</html>